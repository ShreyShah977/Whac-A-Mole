


ARM Macro Assembler    Page 1 


    1 00000000         ; GPIO Test program - Dave Duguid, 2011
    2 00000000         ; Modified Trevor Douglas 2014
    3 00000000         
    4 00000000         
    5 00000000         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    6 00000000         ;;  Author: Shrey Shah
    7 00000000         ;;  SID: 200377176
    8 00000000         ;;  Date: November 27th 2020
    9 00000000         ;;  Class: ENSE 352 Fall 2020
   10 00000000         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   11 00000000         
   12 00000000         
   13 00000000         ;;; Directives
   14 00000000                 PRESERVE8
   15 00000000                 THUMB
   16 00000000         
   17 00000000         
   18 00000000         ;;; Equates
   19 00000000         
   20 00000000 20001000 
                       INITIAL_MSP
                               EQU              0x20001000  ; Initial Main Stac
                                                            k Pointer Value
   21 00000000         
   22 00000000         
   23 00000000         ;PORT A GPIO - Base Addr: 0x40010800
   24 00000000 40010800 
                       GPIOA_CRL
                               EQU              0x40010800  ; (0x00) Port Confi
                                                            guration Register f
                                                            or Px7 -> Px0
   25 00000000 40010804 
                       GPIOA_CRH
                               EQU              0x40010804  ; (0x04) Port Confi
                                                            guration Register f
                                                            or Px15 -> Px8
   26 00000000 40010808 
                       GPIOA_IDR
                               EQU              0x40010808  ; (0x08) Port Input
                                                             Data Register
   27 00000000 4001080C 
                       GPIOA_ODR
                               EQU              0x4001080C  ; (0x0C) Port Outpu
                                                            t Data Register
   28 00000000 40010810 
                       GPIOA_BSRR
                               EQU              0x40010810  ; (0x10) Port Bit S
                                                            et/Reset Register
   29 00000000 40010814 
                       GPIOA_BRR
                               EQU              0x40010814  ; (0x14) Port Bit R
                                                            eset Register
   30 00000000 40010818 
                       GPIOA_LCKR
                               EQU              0x40010818  ; (0x18) Port Confi
                                                            guration Lock Regis
                                                            ter
   31 00000000         
   32 00000000         ;PORT B GPIO - Base Addr: 0x40010C00



ARM Macro Assembler    Page 2 


   33 00000000 40010C00 
                       GPIOB_CRL
                               EQU              0x40010C00  ; (0x00) Port Confi
                                                            guration Register f
                                                            or Px7 -> Px0
   34 00000000 40010C04 
                       GPIOB_CRH
                               EQU              0x40010C04  ; (0x04) Port Confi
                                                            guration Register f
                                                            or Px15 -> Px8
   35 00000000 40010C08 
                       GPIOB_IDR
                               EQU              0x40010C08  ; (0x08) Port Input
                                                             Data Register
   36 00000000 40010C0C 
                       GPIOB_ODR
                               EQU              0x40010C0C  ; (0x0C) Port Outpu
                                                            t Data Register
   37 00000000 40010C10 
                       GPIOB_BSRR
                               EQU              0x40010C10  ; (0x10) Port Bit S
                                                            et/Reset Register
   38 00000000 40010C14 
                       GPIOB_BRR
                               EQU              0x40010C14  ; (0x14) Port Bit R
                                                            eset Register
   39 00000000 40010C18 
                       GPIOB_LCKR
                               EQU              0x40010C18  ; (0x18) Port Confi
                                                            guration Lock Regis
                                                            ter
   40 00000000         
   41 00000000         ;The onboard LEDS are on port C bits 8 and 9
   42 00000000         ;PORT C GPIO - Base Addr: 0x40011000
   43 00000000 40011000 
                       GPIOC_CRL
                               EQU              0x40011000  ; (0x00) Port Confi
                                                            guration Register f
                                                            or Px7 -> Px0
   44 00000000 40011004 
                       GPIOC_CRH
                               EQU              0x40011004  ; (0x04) Port Confi
                                                            guration Register f
                                                            or Px15 -> Px8
   45 00000000 40011008 
                       GPIOC_IDR
                               EQU              0x40011008  ; (0x08) Port Input
                                                             Data Register
   46 00000000 4001100C 
                       GPIOC_ODR
                               EQU              0x4001100C  ; (0x0C) Port Outpu
                                                            t Data Register
   47 00000000 40011010 
                       GPIOC_BSRR
                               EQU              0x40011010  ; (0x10) Port Bit S
                                                            et/Reset Register
   48 00000000 40011014 
                       GPIOC_BRR
                               EQU              0x40011014  ; (0x14) Port Bit R



ARM Macro Assembler    Page 3 


                                                            eset Register
   49 00000000 40011018 
                       GPIOC_LCKR
                               EQU              0x40011018  ; (0x18) Port Confi
                                                            guration Lock Regis
                                                            ter
   50 00000000         
   51 00000000         ;Registers for configuring and enabling the clocks
   52 00000000         ;RCC Registers - Base Addr: 0x40021000
   53 00000000 40021000 
                       RCC_CR  EQU              0x40021000  ; Clock Control Reg
                                                            ister
   54 00000000 40021004 
                       RCC_CFGR
                               EQU              0x40021004  ; Clock Configurati
                                                            on Register
   55 00000000 40021008 
                       RCC_CIR EQU              0x40021008  ; Clock Interrupt R
                                                            egister
   56 00000000 4002100C 
                       RCC_APB2RSTR
                               EQU              0x4002100C  ; APB2 Peripheral R
                                                            eset Register
   57 00000000 40021010 
                       RCC_APB1RSTR
                               EQU              0x40021010  ; APB1 Peripheral R
                                                            eset Register
   58 00000000 40021014 
                       RCC_AHBENR
                               EQU              0x40021014  ; AHB Peripheral Cl
                                                            ock Enable Register
                                                            
   59 00000000         
   60 00000000 40021018 
                       RCC_APB2ENR
                               EQU              0x40021018  ; APB2 Peripheral C
                                                            lock Enable Registe
                                                            r  -- Used
   61 00000000         
   62 00000000 4002101C 
                       RCC_APB1ENR
                               EQU              0x4002101C  ; APB1 Peripheral C
                                                            lock Enable Registe
                                                            r
   63 00000000 40021020 
                       RCC_BDCR
                               EQU              0x40021020  ; Backup Domain Con
                                                            trol Register
   64 00000000 40021024 
                       RCC_CSR EQU              0x40021024  ; Control/Status Re
                                                            gister
   65 00000000 4002102C 
                       RCC_CFGR2
                               EQU              0x4002102C  ; Clock Configurati
                                                            on Register 2
   66 00000000         
   67 00000000         ; Times for delay routines
   68 00000000         
   69 00000000 000493E0 



ARM Macro Assembler    Page 4 


                       DELAYTIME
                               EQU              300000      ; TIMER
   70 00000000 000927C0 
                       PDTIME  EQU              600000      ; TIMER
   71 00000000 0007A120 
                       PDTIME2 EQU              500000      ; TIMER
   72 00000000 0009EB10 
                       REACT_TIME
                               EQU              650000      ; GameWaitTime
   73 00000000         ; Vector Table Mapped to Address 0 at Reset
   74 00000000                 AREA             RESET, Data, READONLY
   75 00000000                 EXPORT           __Vectors
   76 00000000         
   77 00000000 20001000 
                       __Vectors
                               DCD              INITIAL_MSP ; stack pointer val
                                                            ue when stack is em
                                                            pty
   78 00000004 00000000        DCD              Reset_Handler ; reset vector
   79 00000008         
   80 00000008                 AREA             MYCODE, CODE, READONLY
   81 00000000                 EXPORT           Reset_Handler
   82 00000000                 ENTRY
   83 00000000         
   84 00000000         Reset_Handler
                               PROC
   85 00000000         
   86 00000000         
   87 00000000 F7FF FFFE       BL               GPIO_ClockInit
   88 00000004 F7FF FFFE       BL               GPIO_init
   89 00000008 F7FF FFFE       BL               IDLE
   90 0000000C         
   91 0000000C         
   92 0000000C                 ENDP
   93 0000000C         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   94 0000000C         ;; Subroutines
   95 0000000C         ;;
   96 0000000C         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   97 0000000C         
   98 0000000C         
   99 0000000C         
  100 0000000C         ;;;;;;;;;;;;;;;;;;;;;;
  101 0000000C         ;; Turn on clocks
  102 0000000C         ;;
  103 0000000C         ;;
  104 0000000C         ;;;;;;;;;;;;;;;;;;;;;;
  105 0000000C         GPIO_ClockInit
                               PROC
  106 0000000C 4E83            LDR              R6, =RCC_APB2ENR
  107 0000000E 6830            LDR              R0, [R6]    ;
  108 00000010 F040 003C       ORR              R0, #0x3C
  109 00000014 6030            STR              R0, [R6]
  110 00000016 F04F 0C01       LDR              R12, = 0x1  ;
  111 0000001A         
  112 0000001A         
  113 0000001A 4770            BX               LR
  114 0000001C                 ALIGN
  115 0000001C                 ENDP
  116 0000001C         GPIO_init



ARM Macro Assembler    Page 5 


                               PROC
  117 0000001C F04F 3244       LDR              R2,= 0x44444444
  118 00000020 4F7F            LDR              R7,=GPIOA_CRH
  119 00000022 6839            LDR              R1, [R7]    ;
  120 00000024 603A            STR              R2, [R7]
  121 00000026 4F7F            LDR              R7,= GPIOB_CRH ;
  122 00000028 6839            LDR              R1, [R7]    ;
  123 0000002A         
  124 0000002A         
  125 0000002A 4770            BX               LR
  126 0000002C                 ALIGN
  127 0000002C                 ENDP
  128 0000002C         
  129 0000002C         ;;;;;;;;;;;;;;;;;;;;;;;;;
  130 0000002C         ;;; Idle State - UC1 and UC2;
  131 0000002C         ;;; 
  132 0000002C         ;;;
  133 0000002C         ;;;
  134 0000002C         ; ENEL 384 Pushbuttons: SW2(Red): PB8, SW3(Black): PB9, 
                       SW4(Blue): PC12 *****NEW for 2015**** SW5(Green): PA5
  135 0000002C         ; ENEL 384 board LEDs: D1 - PA9, D2 - PA10, D3 - PA11, D
                       4 - PA12
  136 0000002C         ;;;;;;;;;;;;;;;;;;;;;;;;;
  137 0000002C         
  138 0000002C         
  139 0000002C         
  140 0000002C         
  141 0000002C         
  142 0000002C         
  143 0000002C         
  144 0000002C         ;;;;;;;;;;;;;;;;;;;;;;;;;;;
  145 0000002C         ;; This IDLE State will constantly flash 
  146 0000002C         ;; a pattern of lights from 
  147 0000002C         ;; left to right in sequence 
  148 0000002C         ;;until a button is pushed
  149 0000002C         ;; UC2 - Waiting for Player Loop
  150 0000002C         ;;;;;;;;;;;;;;;;;;;;;;;;;;;
  151 0000002C         
  152 0000002C         
  153 0000002C         IDLE    PROC
  154 0000002C F8DF 81F8       LDR              R8,= 0x20001000 ;
  155 00000030 487E            LDR              R0,= REACT_TIME ;
  156 00000032 F8C8 0000       STR              R0, [R8]    ;
  157 00000036 B500            PUSH             {LR}
  158 00000038 F04F 0000       LDR              R0,= 0x0    ;
  159 0000003C F04F 0800       LDR              R8,= 0x0    ;
  160 00000040         
  161 00000040 F04F 0130       LDR              R1,= 0x30   ;
  162 00000044         GameWaitPattern
  163 00000044         
  164 00000044 4876            LDR              R0,= GPIOA_CRH ;
  165 00000046 6001            STR              R1, [R0]    ;
  166 00000048 F8DF 81E4       LDR              R8,= DELAYTIME
  167 0000004C F7FF FFFE       BL               oneSecondDelay
  168 00000050         
  169 00000050         
  170 00000050         
  171 00000050 F7FF FFFE       BL               CheckforUser
  172 00000054 F5B1 3F40       CMP              R1, #0x30000 ; ;; Since we turn



ARM Macro Assembler    Page 6 


                                                             on the light in se
                                                            quence, we must res
                                                            et back to the firs
                                                            t light at the end.
                                                            
  173 00000058 BF08 2103       MOVEQ            R1, #0x3    ;  ;; This does exa
                                                            ctly that by taking
                                                             in the location of
                                                             which light we're 
                                                            at. then resets it.
                                                            
  174 0000005C EA4F 1101       LSL              R1, R1, #0x4 ;;
  175 00000060         
  176 00000060 F85D EB04       POP              {LR}        ;
  177 00000064 E7EE            B                GameWaitPattern
  178 00000066 00 00           ALIGN
  179 00000068                 ENDP
  180 00000068         CheckforUser
                               PROC
  181 00000068 4A72            LDR              R2,= GPIOB_IDR ; Loading in the
                                                             input for the Push
                                                            Buttons assigned at
                                                             Port B;
  182 0000006A 6812            LDR              R2, [R2]    ; 
  183 0000006C EA4F 2212       LSR              R2, R2, #8  ; ;; We isolate the
                                                             bits corresponding
                                                             to a button press 
                                                            from either Red or 
                                                            Black.
  184 00000070 2ADF            CMP              R2, #0xDF   ;
  185 00000072 DBFE            BLT              GameStart
  186 00000074 F04F 0200       LDR              R2,= 0x0    ;
  187 00000078 4A6F            LDR              R2,= GPIOC_IDR ; ;; Check Blue 
                                                            Button at PC12
  188 0000007A 6812            LDR              R2, [R2]    ;
  189 0000007C EA4F 3212       LSR              R2, R2, #12 ;
  190 00000080 2A0E            CMP              R2, #0xE    ;
  191 00000082 D0FE            BEQ              GameStart
  192 00000084 F04F 0200       LDR              R2,= 0x0    ;
  193 00000088 4A6C            LDR              R2,= GPIOA_IDR ;; Check Green B
                                                            utton at PA5
  194 0000008A 6812            LDR              R2, [R2]    ;
  195 0000008C EA4F 1252       LSR              R2, R2, #5  ;
  196 00000090 F002 0201       AND              R2, R2, #0x1 ;
  197 00000094 B162            CBZ              R2, GameStart ;
  198 00000096         
  199 00000096         
  200 00000096 4770            BX               LR          ;
  201 00000098                 ALIGN                        ;
  202 00000098                 ENDP                         ;
  203 00000098         
  204 00000098         
  205 00000098         oneSecondDelay
                               PROC
  206 00000098 F1A8 0801       SUB              R8,R8,#0x1  ;
  207 0000009C F1B8 0F00       CMP              R8, #0      ;
  208 000000A0 DD00            BLE              endDelay
  209 000000A2 DCFE            BGT              oneSecondDelay
  210 000000A4                 ALIGN



ARM Macro Assembler    Page 7 


  211 000000A4                 ENDP
  212 000000A4         endDelay
  213 000000A4 4770            BX               LR          ;
  214 000000A6         
  215 000000A6         
  216 000000A6         
  217 000000A6         
  218 000000A6         GameWait
                               PROC
  219 000000A6 F1A6 0601       SUB              R6, R6, #0x1 ;
  220 000000AA B106            CBZ              R6, TimerDone
  221 000000AC E7FE            B                GameWait
  222 000000AE         TimerDone
  223 000000AE 4770            BX               LR          ;
  224 000000B0                 ENDP
  225 000000B0         
  226 000000B0         
  227 000000B0         
  228 000000B0         
  229 000000B0         GameStart
                               PROC
  230 000000B0 B500            PUSH             {LR}        ;
  231 000000B2 F04F 0200       LDR              R2, = 0x0   ;
  232 000000B6         continuePlay
  233 000000B6 4962            LDR              R1,= 0x4444444 ;
  234 000000B8         ;; Rand Generator
  235 000000B8 4F59            LDR              R7, =GPIOA_CRH ;
  236 000000BA 6039            STR              R1, [R7]    ;
  237 000000BC F8DF 8184       LDR              R8, = PDTIME2 ;
  238 000000C0 F7FF FFFE       BL               oneSecondDelay ;
  239 000000C4         
  240 000000C4 F04F 0A00       LDR              R10, = 0x0  ;
  241 000000C8         
  242 000000C8         loopmain                             ;
  243 000000C8         
  244 000000C8         
  245 000000C8 F7FF FFFE       BL               Rand        ;
  246 000000CC         
  247 000000CC         
  248 000000CC 2C00            CMP              R4, #0x0    ;
  249 000000CE D0FE            BEQ              LED1        ;
  250 000000D0 F1B4 4F40       CMP              R4, #0xC0000000 ;
  251 000000D4 D0FE            BEQ              LED2        ;
  252 000000D6 F1B4 4F00       CMP              R4, #0x80000000 ;
  253 000000DA D0FE            BEQ              LED3        ;
  254 000000DC F1B4 4F80       CMP              R4, #0x40000000 ;
  255 000000E0 D0FE            BEQ              LED4        ; 
  256 000000E2         
  257 000000E2 F04F 0A00       LDR              R10, = 0x0  ;
  258 000000E6 D1EF            BNE              loopmain
  259 000000E8         
  260 000000E8         
  261 000000E8         FinishedWinAnim
  262 000000E8 F85D EB04       POP              {LR}
  263 000000EC E7FE            B                IDLE        ;
  264 000000EE 00 00           ALIGN
  265 000000F0                 ENDP
  266 000000F0         
  267 000000F0         Rand    PROC



ARM Macro Assembler    Page 8 


  268 000000F0         ;; Rand Generator
  269 000000F0         
  270 000000F0 F24C 3183       LDR              R1,= 50051  ;
  271 000000F4 F24C 3A83       LDR              R10, = 50051 ;
  272 000000F8 FB0C FC01       MUL              R12,R1      ;
  273 000000FC 44D4            ADD              R12, R10    ;
  274 000000FE F00C 4440       AND              R4, R12, #0xC0000000 ;
  275 00000102         
  276 00000102 4770            BX               LR
  277 00000104                 ALIGN
  278 00000104                 ENDP
  279 00000104         
  280 00000104         WinState
                               PROC
  281 00000104 F04F 0316       LDR              R3,= 0x16   ;
  282 00000108 4F45            LDR              R7,= GPIOA_CRH ;
  283 0000010A         WinCycleLoop
  284 0000010A F243 0130       LDR              R1,= 0x3030 ;
  285 0000010E 6039            STR              R1, [R7]    ;
  286 00000110 F8DF 811C       LDR              R8,= DELAYTIME
  287 00000114 F7FF FFFE       BL               oneSecondDelay ;
  288 00000118 F1A3 0301       SUB              R3, R3, #1  ;
  289 0000011C EA4F 1101       LSL              R1, R1, #4  ;
  290 00000120 6039            STR              R1, [R7]    ;
  291 00000122 F8DF 810C       LDR              R8,= DELAYTIME
  292 00000126 F7FF FFFE       BL               oneSecondDelay ;
  293 0000012A F1A3 0301       SUB              R3, R3, #1  ;
  294 0000012E B103            CBZ              R3, resetBackToIDLE
  295 00000130 E7EB            B                WinCycleLoop
  296 00000132         resetBackToIDLE
  297 00000132 E7FE            B                IDLE
  298 00000134                 ENDP
  299 00000134                 ALIGN
  300 00000134         
  301 00000134         PreLimWait
                               PROC
  302 00000134 4E43            LDR              R6, = PDTIME2 ;
  303 00000136 F10A 0A01       ADD              R10, R10, #0x1 ;
  304 0000013A 45B2            CMP              R10, R6     ;
  305 0000013C D1FE            BNE              PreLimWait
  306 0000013E 4770            BX               LR          ;
  307 00000140                 ALIGN
  308 00000140                 ENDP
  309 00000140         
  310 00000140         LED1    PROC
  311 00000140         
  312 00000140 F04F 0330       LDR              R3, = 0x30  ;
  313 00000144 603B            STR              R3, [R7]    ;
  314 00000146 F04F 0300       LDR              R3, = 0x0   ;
  315 0000014A 4E37            LDR              R6, = 0x20001000 ;
  316 0000014C 6836            LDR              R6, [R6]    ;
  317 0000014E F7FF FFFE       BL               GameWait    ;
  318 00000152 F8DF 80E0       LDR              R8, = GPIOB_IDR
  319 00000156 F8D8 3000       LDR              R3, [R8]    ;
  320 0000015A EA4F 2313       LSR              R3, #0x8    ;
  321 0000015E 2BDE            CMP              R3, #0xDE
  322 00000160 D0FE            BEQ              TurnOff1    ;
  323 00000162 D1FE            BNE              FailState
  324 00000164                 ALIGN



ARM Macro Assembler    Page 9 


  325 00000164                 ENDP
  326 00000164         
  327 00000164         
  328 00000164         
  329 00000164         LED2    PROC
  330 00000164 F44F 7340       LDR              R3, = 0x300 ;
  331 00000168 603B            STR              R3, [R7]    ;
  332 0000016A 4E2F            LDR              R6, = 0x20001000 ;
  333 0000016C 6836            LDR              R6, [R6]    ;
  334 0000016E F7FF FFFE       BL               GameWait    ;
  335 00000172 F8DF 80C0       LDR              R8, = GPIOB_IDR
  336 00000176 F8D8 3000       LDR              R3, [R8]    ;
  337 0000017A EA4F 2313       LSR              R3, #0x8    ;
  338 0000017E 2BDD            CMP              R3, #0xDD
  339 00000180 D0FE            BEQ              TurnOff1    ;
  340 00000182 D1FE            BNE              FailState
  341 00000184                 ALIGN
  342 00000184                 ENDP
  343 00000184         
  344 00000184         
  345 00000184         LED3    PROC
  346 00000184 F44F 5340       LDR              R3, = 0x3000 ;
  347 00000188 603B            STR              R3, [R7]    ;
  348 0000018A 4E27            LDR              R6, = 0x20001000 ;
  349 0000018C 6836            LDR              R6, [R6]    ;
  350 0000018E F7FF FFFE       BL               GameWait
  351 00000192 F8DF 80A4       LDR              R8, = GPIOC_IDR
  352 00000196 F8D8 3000       LDR              R3, [R8]    ;
  353 0000019A EA4F 3313       LSR              R3, R3, #12 ;
  354 0000019E 2B0E            CMP              R3, #0xE    ;
  355 000001A0 D0FE            BEQ              TurnOff1    ;
  356 000001A2 D1FE            BNE              FailState
  357 000001A4                 ALIGN
  358 000001A4                 ENDP
  359 000001A4         
  360 000001A4         
  361 000001A4                 ALIGN
  362 000001A4         LED4    PROC
  363 000001A4 F44F 3340       LDR              R3, = 0x30000 ;
  364 000001A8 603B            STR              R3, [R7]    ;
  365 000001AA 4E1F            LDR              R6, = 0x20001000 ;
  366 000001AC 6836            LDR              R6, [R6]    ;
  367 000001AE F7FF FFFE       BL               GameWait    ;
  368 000001B2 F8DF 8088       LDR              R8, = GPIOA_IDR
  369 000001B6 F8D8 3000       LDR              R3, [R8]    ;
  370 000001BA EA4F 1353       LSR              R3, R3, #5  ;
  371 000001BE F003 0301       AND              R3, R3, #0x1 ;
  372 000001C2 B10B            CBZ              R3, TurnOff1 ;
  373 000001C4 D1FE            BNE              FailState
  374 000001C6 00 00           ALIGN
  375 000001C8                 ENDP
  376 000001C8         
  377 000001C8         TurnOff1
                               PROC
  378 000001C8 F04F 0100       LDR              R1, =  0x0  ;
  379 000001CC 6039            STR              R1, [R7]    ;
  380 000001CE F44F 7A00       LDR              R10,= 0x200 ;
  381 000001D2         
  382 000001D2 4E15            LDR              R6, = 0x20001000 ;



ARM Macro Assembler    Page 10 


  383 000001D4 6831            LDR              R1, [R6]    ;
  384 000001D6 F102 0201       ADD              R2, R2, #1  ;
  385 000001DA FB0A FA02       MUL              R10, R10, R2 ;
  386 000001DE EBA1 010A       SUB              R1, R1, R10 ;
  387 000001E2 6031            STR              R1, [R6]    ;
  388 000001E4         
  389 000001E4 2A0F            CMP              R2, #15     ;
  390 000001E6 D0FE            BEQ              WinState
  391 000001E8 F7FF FFFE       BL               PreLimWait  ;
  392 000001EC E763            B                continuePlay ;
  393 000001EE 00 00           ALIGN
  394 000001F0                 ENDP
  395 000001F0         FailState
                               PROC
  396 000001F0         
  397 000001F0         
  398 000001F0 4F0B            LDR              R7,= GPIOA_CRH ;
  399 000001F2 F04F 0003       LDR              R0,= 0x3    ;
  400 000001F6         Failloop
  401 000001F6 4914            LDR              R1,= 0x33330 ;
  402 000001F8 6039            STR              R1, [R7]    ;
  403 000001FA F8DF 8034       LDR              R8,= DELAYTIME
  404 000001FE F7FF FFFE       BL               oneSecondDelay ;
  405 00000202 F04F 0100       LDR              R1,= 0x0    ;
  406 00000206 6039            STR              R1, [R7]    ;
  407 00000208 F8DF 8024       LDR              R8,= DELAYTIME
  408 0000020C F7FF FFFE       BL               oneSecondDelay ;
  409 00000210 F1A0 0001       SUB              R0, R0, #1  ;
  410 00000214 B100            CBZ              R0, leave
  411 00000216 E7EE            B                Failloop
  412 00000218         leave
  413 00000218 E7FE            B                IDLE
  414 0000021A 00 00           ALIGN
  415 0000021C                 ENDP
  416 0000021C         
  417 0000021C         Finish
  418 0000021C         
  419 0000021C                 END
              40021018 
              40010804 
              40010C04 
              20001000 
              0009EB10 
              000493E0 
              40010C08 
              40011008 
              40010808 
              04444444 
              0007A120 
              00033330 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\fp1.d -o.\objects\fp1.o -IC:\Users\shrey\Documents\Cours
es\ENSE352\Whac-A-Mole\RTE -IC:\Keil_v5\ARM\PACK\Keil\STM32F1xx_DFP\2.1.0\Devic
e\Include -IC:\Keil_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefin
e="__UVISION_VERSION SETA 521" --predefine="STM32F10X_MD_VL SETA 1" --list=.\li
stings\fp1.lst FP1.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

RESET 00000000

Symbol: RESET
   Definitions
      At line 74 in file FP1.s
   Uses
      None
Comment: RESET unused
__Vectors 00000000

Symbol: __Vectors
   Definitions
      At line 77 in file FP1.s
   Uses
      At line 75 in file FP1.s
Comment: __Vectors used once
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CheckforUser 00000068

Symbol: CheckforUser
   Definitions
      At line 180 in file FP1.s
   Uses
      At line 171 in file FP1.s
Comment: CheckforUser used once
FailState 000001F0

Symbol: FailState
   Definitions
      At line 395 in file FP1.s
   Uses
      At line 323 in file FP1.s
      At line 340 in file FP1.s
      At line 356 in file FP1.s
      At line 373 in file FP1.s

Failloop 000001F6

Symbol: Failloop
   Definitions
      At line 400 in file FP1.s
   Uses
      At line 411 in file FP1.s
Comment: Failloop used once
Finish 0000021C

Symbol: Finish
   Definitions
      At line 417 in file FP1.s
   Uses
      None
Comment: Finish unused
FinishedWinAnim 000000E8

Symbol: FinishedWinAnim
   Definitions
      At line 261 in file FP1.s
   Uses
      None
Comment: FinishedWinAnim unused
GPIO_ClockInit 0000000C

Symbol: GPIO_ClockInit
   Definitions
      At line 105 in file FP1.s
   Uses
      At line 87 in file FP1.s
Comment: GPIO_ClockInit used once
GPIO_init 0000001C

Symbol: GPIO_init
   Definitions
      At line 116 in file FP1.s
   Uses
      At line 88 in file FP1.s
Comment: GPIO_init used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

GameStart 000000B0

Symbol: GameStart
   Definitions
      At line 229 in file FP1.s
   Uses
      At line 185 in file FP1.s
      At line 191 in file FP1.s
      At line 197 in file FP1.s

GameWait 000000A6

Symbol: GameWait
   Definitions
      At line 218 in file FP1.s
   Uses
      At line 221 in file FP1.s
      At line 317 in file FP1.s
      At line 334 in file FP1.s
      At line 350 in file FP1.s
      At line 367 in file FP1.s

GameWaitPattern 00000044

Symbol: GameWaitPattern
   Definitions
      At line 162 in file FP1.s
   Uses
      At line 177 in file FP1.s
Comment: GameWaitPattern used once
IDLE 0000002C

Symbol: IDLE
   Definitions
      At line 153 in file FP1.s
   Uses
      At line 89 in file FP1.s
      At line 263 in file FP1.s
      At line 297 in file FP1.s
      At line 413 in file FP1.s

LED1 00000140

Symbol: LED1
   Definitions
      At line 310 in file FP1.s
   Uses
      At line 249 in file FP1.s
Comment: LED1 used once
LED2 00000164

Symbol: LED2
   Definitions
      At line 329 in file FP1.s
   Uses
      At line 251 in file FP1.s
Comment: LED2 used once
LED3 00000184




ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

Symbol: LED3
   Definitions
      At line 345 in file FP1.s
   Uses
      At line 253 in file FP1.s
Comment: LED3 used once
LED4 000001A4

Symbol: LED4
   Definitions
      At line 362 in file FP1.s
   Uses
      At line 255 in file FP1.s
Comment: LED4 used once
MYCODE 00000000

Symbol: MYCODE
   Definitions
      At line 80 in file FP1.s
   Uses
      None
Comment: MYCODE unused
PreLimWait 00000134

Symbol: PreLimWait
   Definitions
      At line 301 in file FP1.s
   Uses
      At line 305 in file FP1.s
      At line 391 in file FP1.s

Rand 000000F0

Symbol: Rand
   Definitions
      At line 267 in file FP1.s
   Uses
      At line 245 in file FP1.s
Comment: Rand used once
Reset_Handler 00000000

Symbol: Reset_Handler
   Definitions
      At line 84 in file FP1.s
   Uses
      At line 78 in file FP1.s
      At line 81 in file FP1.s

TimerDone 000000AE

Symbol: TimerDone
   Definitions
      At line 222 in file FP1.s
   Uses
      At line 220 in file FP1.s
Comment: TimerDone used once
TurnOff1 000001C8

Symbol: TurnOff1



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 377 in file FP1.s
   Uses
      At line 322 in file FP1.s
      At line 339 in file FP1.s
      At line 355 in file FP1.s
      At line 372 in file FP1.s

WinCycleLoop 0000010A

Symbol: WinCycleLoop
   Definitions
      At line 283 in file FP1.s
   Uses
      At line 295 in file FP1.s
Comment: WinCycleLoop used once
WinState 00000104

Symbol: WinState
   Definitions
      At line 280 in file FP1.s
   Uses
      At line 390 in file FP1.s
Comment: WinState used once
continuePlay 000000B6

Symbol: continuePlay
   Definitions
      At line 232 in file FP1.s
   Uses
      At line 392 in file FP1.s
Comment: continuePlay used once
endDelay 000000A4

Symbol: endDelay
   Definitions
      At line 212 in file FP1.s
   Uses
      At line 208 in file FP1.s
Comment: endDelay used once
leave 00000218

Symbol: leave
   Definitions
      At line 412 in file FP1.s
   Uses
      At line 410 in file FP1.s
Comment: leave used once
loopmain 000000C8

Symbol: loopmain
   Definitions
      At line 242 in file FP1.s
   Uses
      At line 258 in file FP1.s
Comment: loopmain used once
oneSecondDelay 00000098

Symbol: oneSecondDelay



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 205 in file FP1.s
   Uses
      At line 167 in file FP1.s
      At line 209 in file FP1.s
      At line 238 in file FP1.s
      At line 287 in file FP1.s
      At line 292 in file FP1.s
      At line 404 in file FP1.s
      At line 408 in file FP1.s

resetBackToIDLE 00000132

Symbol: resetBackToIDLE
   Definitions
      At line 296 in file FP1.s
   Uses
      At line 294 in file FP1.s
Comment: resetBackToIDLE used once
29 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DELAYTIME 000493E0

Symbol: DELAYTIME
   Definitions
      At line 69 in file FP1.s
   Uses
      At line 166 in file FP1.s
      At line 286 in file FP1.s
      At line 291 in file FP1.s
      At line 403 in file FP1.s
      At line 407 in file FP1.s

GPIOA_BRR 40010814

Symbol: GPIOA_BRR
   Definitions
      At line 29 in file FP1.s
   Uses
      None
Comment: GPIOA_BRR unused
GPIOA_BSRR 40010810

Symbol: GPIOA_BSRR
   Definitions
      At line 28 in file FP1.s
   Uses
      None
Comment: GPIOA_BSRR unused
GPIOA_CRH 40010804

Symbol: GPIOA_CRH
   Definitions
      At line 25 in file FP1.s
   Uses
      At line 118 in file FP1.s
      At line 164 in file FP1.s
      At line 235 in file FP1.s
      At line 282 in file FP1.s
      At line 398 in file FP1.s

GPIOA_CRL 40010800

Symbol: GPIOA_CRL
   Definitions
      At line 24 in file FP1.s
   Uses
      None
Comment: GPIOA_CRL unused
GPIOA_IDR 40010808

Symbol: GPIOA_IDR
   Definitions
      At line 26 in file FP1.s
   Uses
      At line 193 in file FP1.s
      At line 368 in file FP1.s

GPIOA_LCKR 40010818




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: GPIOA_LCKR
   Definitions
      At line 30 in file FP1.s
   Uses
      None
Comment: GPIOA_LCKR unused
GPIOA_ODR 4001080C

Symbol: GPIOA_ODR
   Definitions
      At line 27 in file FP1.s
   Uses
      None
Comment: GPIOA_ODR unused
GPIOB_BRR 40010C14

Symbol: GPIOB_BRR
   Definitions
      At line 38 in file FP1.s
   Uses
      None
Comment: GPIOB_BRR unused
GPIOB_BSRR 40010C10

Symbol: GPIOB_BSRR
   Definitions
      At line 37 in file FP1.s
   Uses
      None
Comment: GPIOB_BSRR unused
GPIOB_CRH 40010C04

Symbol: GPIOB_CRH
   Definitions
      At line 34 in file FP1.s
   Uses
      At line 121 in file FP1.s
Comment: GPIOB_CRH used once
GPIOB_CRL 40010C00

Symbol: GPIOB_CRL
   Definitions
      At line 33 in file FP1.s
   Uses
      None
Comment: GPIOB_CRL unused
GPIOB_IDR 40010C08

Symbol: GPIOB_IDR
   Definitions
      At line 35 in file FP1.s
   Uses
      At line 181 in file FP1.s
      At line 318 in file FP1.s
      At line 335 in file FP1.s

GPIOB_LCKR 40010C18

Symbol: GPIOB_LCKR



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 39 in file FP1.s
   Uses
      None
Comment: GPIOB_LCKR unused
GPIOB_ODR 40010C0C

Symbol: GPIOB_ODR
   Definitions
      At line 36 in file FP1.s
   Uses
      None
Comment: GPIOB_ODR unused
GPIOC_BRR 40011014

Symbol: GPIOC_BRR
   Definitions
      At line 48 in file FP1.s
   Uses
      None
Comment: GPIOC_BRR unused
GPIOC_BSRR 40011010

Symbol: GPIOC_BSRR
   Definitions
      At line 47 in file FP1.s
   Uses
      None
Comment: GPIOC_BSRR unused
GPIOC_CRH 40011004

Symbol: GPIOC_CRH
   Definitions
      At line 44 in file FP1.s
   Uses
      None
Comment: GPIOC_CRH unused
GPIOC_CRL 40011000

Symbol: GPIOC_CRL
   Definitions
      At line 43 in file FP1.s
   Uses
      None
Comment: GPIOC_CRL unused
GPIOC_IDR 40011008

Symbol: GPIOC_IDR
   Definitions
      At line 45 in file FP1.s
   Uses
      At line 187 in file FP1.s
      At line 351 in file FP1.s

GPIOC_LCKR 40011018

Symbol: GPIOC_LCKR
   Definitions
      At line 49 in file FP1.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

   Uses
      None
Comment: GPIOC_LCKR unused
GPIOC_ODR 4001100C

Symbol: GPIOC_ODR
   Definitions
      At line 46 in file FP1.s
   Uses
      None
Comment: GPIOC_ODR unused
INITIAL_MSP 20001000

Symbol: INITIAL_MSP
   Definitions
      At line 20 in file FP1.s
   Uses
      At line 77 in file FP1.s
Comment: INITIAL_MSP used once
PDTIME 000927C0

Symbol: PDTIME
   Definitions
      At line 70 in file FP1.s
   Uses
      None
Comment: PDTIME unused
PDTIME2 0007A120

Symbol: PDTIME2
   Definitions
      At line 71 in file FP1.s
   Uses
      At line 237 in file FP1.s
      At line 302 in file FP1.s

RCC_AHBENR 40021014

Symbol: RCC_AHBENR
   Definitions
      At line 58 in file FP1.s
   Uses
      None
Comment: RCC_AHBENR unused
RCC_APB1ENR 4002101C

Symbol: RCC_APB1ENR
   Definitions
      At line 62 in file FP1.s
   Uses
      None
Comment: RCC_APB1ENR unused
RCC_APB1RSTR 40021010

Symbol: RCC_APB1RSTR
   Definitions
      At line 57 in file FP1.s
   Uses
      None



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

Comment: RCC_APB1RSTR unused
RCC_APB2ENR 40021018

Symbol: RCC_APB2ENR
   Definitions
      At line 60 in file FP1.s
   Uses
      At line 106 in file FP1.s
Comment: RCC_APB2ENR used once
RCC_APB2RSTR 4002100C

Symbol: RCC_APB2RSTR
   Definitions
      At line 56 in file FP1.s
   Uses
      None
Comment: RCC_APB2RSTR unused
RCC_BDCR 40021020

Symbol: RCC_BDCR
   Definitions
      At line 63 in file FP1.s
   Uses
      None
Comment: RCC_BDCR unused
RCC_CFGR 40021004

Symbol: RCC_CFGR
   Definitions
      At line 54 in file FP1.s
   Uses
      None
Comment: RCC_CFGR unused
RCC_CFGR2 4002102C

Symbol: RCC_CFGR2
   Definitions
      At line 65 in file FP1.s
   Uses
      None
Comment: RCC_CFGR2 unused
RCC_CIR 40021008

Symbol: RCC_CIR
   Definitions
      At line 55 in file FP1.s
   Uses
      None
Comment: RCC_CIR unused
RCC_CR 40021000

Symbol: RCC_CR
   Definitions
      At line 53 in file FP1.s
   Uses
      None
Comment: RCC_CR unused
RCC_CSR 40021024




ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Absolute symbols

Symbol: RCC_CSR
   Definitions
      At line 64 in file FP1.s
   Uses
      None
Comment: RCC_CSR unused
REACT_TIME 0009EB10

Symbol: REACT_TIME
   Definitions
      At line 72 in file FP1.s
   Uses
      At line 155 in file FP1.s
Comment: REACT_TIME used once
37 symbols
403 symbols in table
